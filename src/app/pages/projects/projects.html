<!-- Project Planner -->
<div class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6">
  
  <!-- Projects List View -->
  @if (!selectedProject()) {
    <div class="max-w-7xl mx-auto space-y-6">
      
      <!-- Header Section -->
      <div class="bg-white rounded-xl p-6 shadow-lg">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
          <div>
            <h1 class="text-3xl font-bold text-gray-800">Project Planner</h1>
            <p class="text-gray-600">Manage your projects, tasks, goals, and milestones</p>
          </div>
          
          <div class="flex gap-3">
            <button (click)="showCreateProject = true"
                    class="flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              New Project
            </button>
            
            <!-- View Toggle -->
            <div class="flex border border-gray-300 rounded-lg overflow-hidden">
              <button (click)="currentView = 'list'"
                      [class.bg-blue-500]="currentView === 'list'"
                      [class.text-white]="currentView === 'list'"
                      [class.text-gray-600]="currentView !== 'list'"
                      class="px-3 py-2 text-sm transition-colors">
                List
              </button>
              <button (click)="currentView = 'board'"
                      [class.bg-blue-500]="currentView === 'board'"
                      [class.text-white]="currentView === 'board'"
                      [class.text-gray-600]="currentView !== 'board'"
                      class="px-3 py-2 text-sm transition-colors">
                Board
              </button>
            </div>
          </div>
        </div>
        
        <!-- Filters and Search -->
        <div class="mt-6 flex flex-wrap gap-4">
          <div class="flex items-center gap-2">
            <label class="text-sm font-medium text-gray-700">Status:</label>
            <select [(ngModel)]="filterStatus" class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
              <option value="all">All</option>
              <option value="planning">Planning</option>
              <option value="active">Active</option>
              <option value="on-hold">On Hold</option>
              <option value="completed">Completed</option>
            </select>
          </div>
          
          <div class="flex items-center gap-2">
            <label class="text-sm font-medium text-gray-700">Priority:</label>
            <select [(ngModel)]="filterPriority" class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
              <option value="all">All</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          
          <div class="flex items-center gap-2">
            <label class="text-sm font-medium text-gray-700">Sort by:</label>
            <select [(ngModel)]="sortBy" class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
              <option value="title">Title</option>
              <option value="dueDate">Due Date</option>
              <option value="priority">Priority</option>
              <option value="progress">Progress</option>
            </select>
            
            <button (click)="sortDirection = sortDirection === 'asc' ? 'desc' : 'asc'"
                    class="p-1 hover:bg-gray-100 rounded transition-colors">
              <svg class="w-4 h-4 transform transition-transform" 
                   [class.rotate-180]="sortDirection === 'desc'"
                   fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Projects Grid/List -->
      @if (currentView === 'list') {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          @for (project of getFilteredProjects(); track project.id) {
            <div (click)="selectProject(project.id)"
                 class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group border-l-4"
                 [style.border-left-color]="project.color">
              
              <!-- Project Header -->
              <div class="flex items-start justify-between mb-4">
                <div class="flex items-center gap-3 flex-1">
                  <span class="text-2xl">{{ project.icon }}</span>
                  <div class="min-w-0 flex-1">
                    <h3 class="font-bold text-gray-800 truncate">{{ project.title }}</h3>
                    <p class="text-sm text-gray-600 line-clamp-2">{{ project.description || 'No description' }}</p>
                  </div>
                </div>
                
                <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                  <button (click)="duplicateProject(project, $event)"
                          class="p-1 hover:bg-gray-100 rounded">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                  </button>
                  <button (click)="deleteProject(project.id, $event)"
                          class="p-1 hover:bg-red-100 text-red-600 rounded">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
              </div>
              
              <!-- Status and Priority -->
              <div class="flex items-center gap-2 mb-4">
                <span class="px-2 py-1 rounded-full text-xs font-medium"
                      [style.background-color]="getStatusColor(project.status) + '20'"
                      [style.color]="getStatusColor(project.status)">
                  {{ project.status | titlecase }}
                </span>
                <span class="px-2 py-1 rounded-full text-xs font-medium"
                      [style.background-color]="getPriorityColor(project.priority) + '20'"
                      [style.color]="getPriorityColor(project.priority)">
                  {{ project.priority | titlecase }}
                </span>
              </div>
              
              <!-- Progress Bar -->
              <div class="mb-4">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm font-medium text-gray-700">Progress</span>
                  <span class="text-sm text-gray-600">{{ project.progress }}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-blue-500 h-2 rounded-full transition-all duration-500"
                       [style.width.%]="project.progress"></div>
                </div>
              </div>
              
              <!-- Stats Row -->
              <div class="grid grid-cols-3 gap-4 text-center">
                <div>
                  <div class="text-lg font-bold text-gray-800">{{ project.tasks.length }}</div>
                  <div class="text-xs text-gray-600">Tasks</div>
                </div>
                <div>
                  <div class="text-lg font-bold text-gray-800">{{ project.milestones.length }}</div>
                  <div class="text-xs text-gray-600">Milestones</div>
                </div>
                <div>
                  <div class="text-lg font-bold text-gray-800">{{ project.goals.length }}</div>
                  <div class="text-xs text-gray-600">Goals</div>
                </div>
              </div>
              
              <!-- Due Date -->
              @if (project.dueDate) {
                <div class="mt-4 pt-4 border-t border-gray-100">
                  <div class="flex items-center gap-2 text-sm"
                       [class.text-red-600]="isOverdue(project.dueDate)"
                       [class.text-gray-600]="!isOverdue(project.dueDate)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Due {{ formatDate(project.dueDate) }}
                    @if (isOverdue(project.dueDate)) {
                      <span class="text-red-600 font-medium">({{ getAbsoluteDaysOverdue(project) }} days overdue)</span>
                    } @else {
                      <span>({{ getDaysUntilDue(project.dueDate) }} days left)</span>
                    }
                  </div>
                </div>
              }
            </div>
          }
        </div>
      }
      
      <!-- No Projects State -->
      @if (getFilteredProjects().length === 0) {
        <div class="bg-white rounded-xl p-12 shadow-lg text-center">
          <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
            <span class="text-2xl">ðŸ“‹</span>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">No projects found</h3>
          <p class="text-gray-600 mb-6">Create your first project to start planning and tracking your work</p>
          <button (click)="showCreateProject = true"
                  class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors">
            Create First Project
          </button>
        </div>
      }
    </div>
  }
  
  <!-- Project Detail View -->
  @if (selectedProject(); as project) {
    <div class="max-w-7xl mx-auto space-y-6">
      
      <!-- Project Header -->
      <div class="bg-white rounded-xl p-6 shadow-lg">
        <div class="flex items-center justify-between mb-4">
          <button (click)="goBack()" class="flex items-center gap-2 text-gray-600 hover:text-gray-800">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Back to Projects
          </button>
          
          <div class="flex gap-2">
            <button (click)="showCreateTask = true"
                    class="flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              Add Task
            </button>
            <button (click)="showCreateMilestone = true"
                    class="flex items-center gap-2 bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Add Milestone
            </button>
            <button (click)="showCreateGoal = true"
                    class="flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Add Goal
            </button>
          </div>
        </div>
        
        <div class="flex items-start gap-4">
          <span class="text-4xl">{{ project.icon }}</span>
          <div class="flex-1">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">{{ project.title }}</h1>
            <p class="text-gray-600 mb-4">{{ project.description || 'No description' }}</p>
            
            <div class="flex items-center gap-4">
              <span class="px-3 py-1 rounded-full text-sm font-medium"
                    [style.background-color]="getStatusColor(project.status) + '20'"
                    [style.color]="getStatusColor(project.status)">
                {{ project.status | titlecase }}
              </span>
              <span class="px-3 py-1 rounded-full text-sm font-medium"
                    [style.background-color]="getPriorityColor(project.priority) + '20'"
                    [style.color]="getPriorityColor(project.priority)">
                {{ project.priority | titlecase }} Priority
              </span>
              @if (project.dueDate) {
                <span class="text-sm text-gray-600">
                  Due {{ formatDate(project.dueDate) }}
                </span>
              }
            </div>
          </div>
          
          <!-- Progress Circle -->
          <div class="relative w-20 h-20">
            <svg class="w-20 h-20 transform -rotate-90" viewBox="0 0 36 36">
              <path class="text-gray-200" stroke="currentColor" stroke-width="3" fill="none"
                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
              <path class="text-blue-500" stroke="currentColor" stroke-width="3" fill="none"
                    [attr.stroke-dasharray]="project.progress + ', 100'"
                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-sm font-bold text-gray-700">{{ project.progress }}%</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Project Content Tabs -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Tasks Column -->
        <div class="bg-white rounded-xl p-6 shadow-lg">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">Tasks</h2>
            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">
              {{ getCompletedTasksCount(project) }}/{{ project.tasks.length }}
            </span>
          </div>
          
          @if (project.tasks.length > 0) {
            <div class="space-y-3 max-h-96 overflow-y-auto">
              @for (task of project.tasks; track task.id) {
                <div class="flex items-start gap-3 p-3 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors">
                  <button (click)="toggleTask(task.id)"
                          class="w-5 h-5 rounded border-2 flex items-center justify-center transition-all mt-0.5"
                          [class.bg-green-500]="task.completed"
                          [class.border-green-500]="task.completed"
                          [class.border-gray-300]="!task.completed"
                          [class.hover:border-green-400]="!task.completed">
                    @if (task.completed) {
                      <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                    }
                  </button>
                  
                  <div class="flex-1 min-w-0">
                    <div class="font-medium text-gray-800"
                         [class.line-through]="task.completed"
                         [class.text-gray-500]="task.completed">
                      {{ task.title }}
                    </div>
                    @if (task.description) {
                      <div class="text-sm text-gray-600 mt-1">{{ task.description }}</div>
                    }
                    
                    <div class="flex items-center gap-2 mt-2">
                      <span class="px-2 py-1 rounded-full text-xs font-medium"
                            [style.background-color]="getPriorityColor(task.priority) + '20'"
                            [style.color]="getPriorityColor(task.priority)">
                        {{ task.priority }}
                      </span>
                      @if (task.dueDate) {
                        <span class="text-xs text-gray-500">
                          Due {{ formatDate(task.dueDate) }}
                        </span>
                      }
                    </div>
                  </div>
                  
                  <button (click)="deleteTask(task.id)"
                          class="opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 text-red-600 rounded transition-all">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
              }
            </div>
          } @else {
            <div class="text-center py-8 text-gray-500">
              <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
              </svg>
              <p>No tasks yet</p>
              <button (click)="showCreateTask = true" class="text-blue-500 hover:text-blue-600 text-sm mt-1">
                Add your first task
              </button>
            </div>
          }
        </div>
        
        <!-- Milestones Column -->
        <div class="bg-white rounded-xl p-6 shadow-lg">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">Milestones</h2>
            <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm font-medium">
              {{ getCompletedMilestonesCount(project) }}/{{ project.milestones.length }}
            </span>
          </div>
          
          @if (project.milestones.length > 0) {
            <div class="space-y-3 max-h-96 overflow-y-auto">
              @for (milestone of project.milestones; track milestone.id) {
                <div class="p-4 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors">
                  <div class="flex items-start justify-between">
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-2">
                        <button (click)="toggleMilestone(milestone.id)"
                                class="w-4 h-4 rounded-full border-2 flex items-center justify-center"
                                [class.bg-purple-500]="milestone.completed"
                                [class.border-purple-500]="milestone.completed"
                                [class.border-gray-300]="!milestone.completed">
                          @if (milestone.completed) {
                            <svg class="w-2 h-2 text-white" fill="currentColor" viewBox="0 0 8 8">
                              <circle cx="4" cy="4" r="4"/>
                            </svg>
                          }
                        </button>
                        
                        <h3 class="font-medium text-gray-800"
                            [class.line-through]="milestone.completed"
                            [class.text-gray-500]="milestone.completed">
                          {{ milestone.title }}
                        </h3>
                      </div>
                      
                      @if (milestone.description) {
                        <p class="text-sm text-gray-600 mb-2">{{ milestone.description }}</p>
                      }
                      
                      <div class="text-xs text-gray-500">
                        Target: {{ formatDate(milestone.targetDate) }}
                      </div>
                    </div>
                    
                    <button (click)="deleteMilestone(milestone.id)"
                            class="opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 text-red-600 rounded transition-all">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              }
            </div>
          } @else {
            <div class="text-center py-8 text-gray-500">
              <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <p>No milestones yet</p>
              <button (click)="showCreateMilestone = true" class="text-purple-500 hover:text-purple-600 text-sm mt-1">
                Add your first milestone
              </button>
            </div>
          }
        </div>
        
        <!-- Goals Column -->
        <div class="bg-white rounded-xl p-6 shadow-lg">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">Goals</h2>
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-medium">
              {{ getAchievedGoalsCount(project) }}/{{ project.goals.length }}
            </span>
          </div>
          
          @if (project.goals.length > 0) {
            <div class="space-y-3 max-h-96 overflow-y-auto">
              @for (goal of project.goals; track goal.id) {
                <div class="p-4 rounded-lg border border-gray-100 hover:bg-gray-50 transition-colors">
                  <div class="flex items-start justify-between">
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-2">
                        <button (click)="toggleGoal(goal.id)"
                                class="w-4 h-4 rounded border-2 flex items-center justify-center"
                                [class.bg-green-500]="goal.achieved"
                                [class.border-green-500]="goal.achieved"
                                [class.border-gray-300]="!goal.achieved">
                          @if (goal.achieved) {
                            <svg class="w-2 h-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
                            </svg>
                          }
                        </button>
                        
                        <h3 class="font-medium text-gray-800"
                            [class.line-through]="goal.achieved"
                            [class.text-gray-500]="goal.achieved">
                          {{ goal.title }}
                        </h3>
                      </div>
                      
                      @if (goal.description) {
                        <p class="text-sm text-gray-600 mb-2">{{ goal.description }}</p>
                      }
                      
                      @if (goal.targetValue && goal.unit) {
                        <div class="text-sm text-gray-600 mb-2">
                          {{ goal.currentValue || 0 }}/{{ goal.targetValue }} {{ goal.unit }}
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                          <div class="bg-green-500 h-2 rounded-full"
                               [style.width.%]="getGoalProgressPercentage(goal)"></div>
                        </div>
                      }
                      
                      @if (goal.deadline) {
                        <div class="text-xs text-gray-500 mt-2">
                          Deadline: {{ formatDate(goal.deadline) }}
                        </div>
                      }
                    </div>
                    
                    <button (click)="deleteGoal(goal.id)"
                            class="opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 text-red-600 rounded transition-all">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              }
            </div>
          } @else {
            <div class="text-center py-8 text-gray-500">
              <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <p>No goals yet</p>
              <button (click)="showCreateGoal = true" class="text-green-500 hover:text-green-600 text-sm mt-1">
                Add your first goal
              </button>
            </div>
          }
        </div>
      </div>
    </div>
  }
  
  <!-- Create Project Modal -->
  @if (showCreateProject) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-xl p-6 w-full max-w-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Create New Project</h3>
        
        <form (ngSubmit)="createProject()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
            <input [(ngModel)]="newProject.title" name="title" required
                   class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
            <textarea [(ngModel)]="newProject.description" name="description" rows="3"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
              <select [(ngModel)]="newProject.priority" name="priority"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
              <select [(ngModel)]="newProject.status" name="status"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2">
                <option value="planning" selected>Planning</option>
                <option value="active">Active</option>
                <option value="on-hold">On Hold</option>
              </select>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
              <input type="date" [(ngModel)]="newProject.startDate" name="startDate"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
              <input type="date" [(ngModel)]="newProject.dueDate" name="dueDate"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
          </div>
          
          <div class="flex gap-3 pt-4">
            <button type="submit" 
                    class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors">
              Create Project
            </button>
            <button type="button" (click)="resetCreateProjectForm()"
                    class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  }
  
  <!-- Create Task Modal -->
  @if (showCreateTask) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-xl p-6 w-full max-w-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Create New Task</h3>
        
        <form (ngSubmit)="createTask()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
            <input [(ngModel)]="newTask.title" name="taskTitle" required
                   class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
            <textarea [(ngModel)]="newTask.description" name="taskDescription" rows="3"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
              <select [(ngModel)]="newTask.priority" name="taskPriority"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Estimated Hours</label>
              <input type="number" [(ngModel)]="newTask.estimatedHours" name="taskHours" min="0" step="0.5"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
            <input type="date" [(ngModel)]="newTask.dueDate" name="taskDueDate"
                   class="w-full border border-gray-300 rounded-lg px-3 py-2">
          </div>
          
          <div class="flex gap-3 pt-4">
            <button type="submit" 
                    class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors">
              Create Task
            </button>
            <button type="button" (click)="resetCreateTaskForm()"
                    class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  }
  
  <!-- Create Milestone Modal -->
  @if (showCreateMilestone) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-xl p-6 w-full max-w-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Create New Milestone</h3>
        
        <form (ngSubmit)="createMilestone()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
            <input [(ngModel)]="newMilestone.title" name="milestoneTitle" required
                   class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
            <textarea [(ngModel)]="newMilestone.description" name="milestoneDescription" rows="3"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Target Date *</label>
            <input type="date" [(ngModel)]="newMilestone.targetDate" name="milestoneTargetDate" required
                   class="w-full border border-gray-300 rounded-lg px-3 py-2">
          </div>
          
          <div class="flex gap-3 pt-4">
            <button type="submit" 
                    class="flex-1 bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600 transition-colors">
              Create Milestone
            </button>
            <button type="button" (click)="resetCreateMilestoneForm()"
                    class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  }
  
  <!-- Create Goal Modal -->
  @if (showCreateGoal) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div class="bg-white rounded-xl p-6 w-full max-w-md">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Create New Goal</h3>
        
        <form (ngSubmit)="createGoal()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Title *</label>
            <input [(ngModel)]="newGoal.title" name="goalTitle" required
                   class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
            <textarea [(ngModel)]="newGoal.description" name="goalDescription" rows="3"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-transparent"></textarea>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Target Value</label>
              <input type="number" [(ngModel)]="newGoal.targetValue" name="goalTarget" min="0"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
              <input [(ngModel)]="newGoal.unit" name="goalUnit" placeholder="e.g., tasks, hours, %"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
              <select [(ngModel)]="newGoal.category" name="goalCategory"
                      class="w-full border border-gray-300 rounded-lg px-3 py-2">
                <option value="quality">Quality</option>
                <option value="productivity">Productivity</option>
                <option value="learning">Learning</option>
                <option value="deadline">Deadline</option>
                <option value="other" selected>Other</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Deadline</label>
              <input type="date" [(ngModel)]="newGoal.deadline" name="goalDeadline"
                     class="w-full border border-gray-300 rounded-lg px-3 py-2">
            </div>
          </div>
          
          <div class="flex gap-3 pt-4">
            <button type="submit" 
                    class="flex-1 bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-colors">
              Create Goal
            </button>
            <button type="button" (click)="resetCreateGoalForm()"
                    class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  }
</div>